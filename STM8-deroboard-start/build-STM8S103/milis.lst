                                      1 .module milis
                                      2 .optsdcc -mstm8
                                      3 .globl _TIM4_ClearFlag
                                      4 .globl _TIM4_ITConfig
                                      5 .globl _TIM4_Cmd
                                      6 .globl _TIM4_TimeBaseInit
                                      7 .globl _ITC_SetSoftwarePriority
                                      8 .globl _miliseconds
                                      9 .globl _init_milis
                                     10 .globl _TIM4_UPD_OVF_IRQHandler
                                     11 .area DATA
                                     12 .area INITIALIZED
      000000                         13 _miliseconds::
      000000                         14 .ds 4
                                     15 .area DABS (ABS)
                                     16 .area HOME
                                     17 .area GSINIT
                                     18 .area GSFINAL
                                     19 .area CONST
                                     20 .area INITIALIZER
                                     21 .area CODE
                                     22 .area HOME
                                     23 .area GSINIT
                                     24 .area GSFINAL
                                     25 .area GSINIT
                                     26 .area HOME
                                     27 .area HOME
                                     28 .area CODE
      000000                         29 _init_milis:
      000000 4B 7C            [ 1]   30 push	#0x7c
      000002 4B 07            [ 1]   31 push	#0x07
      000004 CDr00r00         [ 4]   32 call	_TIM4_TimeBaseInit
      000007 85               [ 2]   33 popw	x
      000008 4B 01            [ 1]   34 push	#0x01
      00000A CDr00r00         [ 4]   35 call	_TIM4_ClearFlag
      00000D 84               [ 1]   36 pop	a
      00000E 4B 01            [ 1]   37 push	#0x01
      000010 4B 01            [ 1]   38 push	#0x01
      000012 CDr00r00         [ 4]   39 call	_TIM4_ITConfig
      000015 85               [ 2]   40 popw	x
      000016 4B 01            [ 1]   41 push	#0x01
      000018 4B 17            [ 1]   42 push	#0x17
      00001A CDr00r00         [ 4]   43 call	_ITC_SetSoftwarePriority
      00001D 85               [ 2]   44 popw	x
      00001E 9A               [ 1]   45 rim
      00001F 4B 01            [ 1]   46 push	#0x01
      000021 CDr00r00         [ 4]   47 call	_TIM4_Cmd
      000024 84               [ 1]   48 pop	a
      000025                         49 00101$:
      000025 81               [ 4]   50 ret
      000026                         51 _TIM4_UPD_OVF_IRQHandler:
      000026 62               [ 2]   52 div	x, a
      000027 4B 01            [ 1]   53 push	#0x01
      000029 CDr00r00         [ 4]   54 call	_TIM4_ClearFlag
      00002C 84               [ 1]   55 pop	a
      00002D CEu00u02         [ 2]   56 ldw	x, _miliseconds+2
      000030 90 CEu00u00      [ 2]   57 ldw	y, _miliseconds+0
      000034 5C               [ 1]   58 incw	x
      000035 26 02            [ 1]   59 jrne	00103$
      000037 90 5C            [ 1]   60 incw	y
      000039                         61 00103$:
      000039 CFu00u02         [ 2]   62 ldw	_miliseconds+2, x
      00003C 90 CFu00u00      [ 2]   63 ldw	_miliseconds+0, y
      000040                         64 00101$:
      000040 80               [11]   65 iret
                                     66 .area CODE
                                     67 .area CONST
                                     68 .area INITIALIZER
      000000                         69 __xinit__miliseconds:
      000000 00 00 00 00             70 .byte #0x00, #0x00, #0x00, #0x00	; 0
                                     71 .area CABS (ABS)
