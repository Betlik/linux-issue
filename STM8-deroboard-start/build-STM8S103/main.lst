                                      1 .module main
                                      2 .optsdcc -mstm8
                                      3 .globl _main
                                      4 .globl _setup
                                      5 .globl _sprintf
                                      6 .globl _lcd_puts
                                      7 .globl _lcd_gotoxy
                                      8 .globl _lcd_init
                                      9 .globl _init_milis
                                     10 .globl _GPIO_ReadInputPin
                                     11 .globl _GPIO_WriteReverse
                                     12 .globl _GPIO_Init
                                     13 .globl _CLK_HSIPrescalerConfig
                                     14 .area DATA
                                     15 .area INITIALIZED
                                     16 .area	SSEG
      000000                         17 __start__stack:
      000000                         18 .ds	1
                                     19 .area DABS (ABS)
                                     20 .area HOME
                                     21 .area GSINIT
                                     22 .area GSFINAL
                                     23 .area CONST
                                     24 .area INITIALIZER
                                     25 .area CODE
                                     26 .area HOME
      000000                         27 __interrupt_vect:
      000000 82v00u00u00             28 int s_GSINIT ; reset
      000004 82v00u00u00             29 int _TRAP_IRQHandler ; trap
      000008 82v00u00u00             30 int _TLI_IRQHandler ; int0
      00000C 82v00u00u00             31 int _AWU_IRQHandler ; int1
      000010 82v00u00u00             32 int _CLK_IRQHandler ; int2
      000014 82v00u00u00             33 int _EXTI_PORTA_IRQHandler ; int3
      000018 82v00u00u00             34 int _EXTI_PORTB_IRQHandler ; int4
      00001C 82v00u00u00             35 int _EXTI_PORTC_IRQHandler ; int5
      000020 82v00u00u00             36 int _EXTI_PORTD_IRQHandler ; int6
      000024 82v00u00u00             37 int _EXTI_PORTE_IRQHandler ; int7
      000028 82 00 00 00             38 int 0x000000 ; int8
      00002C 82 00 00 00             39 int 0x000000 ; int9
      000030 82v00u00u00             40 int _SPI_IRQHandler ; int10
      000034 82v00u00u00             41 int _TIM1_UPD_OVF_TRG_BRK_IRQHandler ; int11
      000038 82v00u00u00             42 int _TIM1_CAP_COM_IRQHandler ; int12
      00003C 82v00u00u00             43 int _TIM2_UPD_OVF_BRK_IRQHandler ; int13
      000040 82v00u00u00             44 int _TIM2_CAP_COM_IRQHandler ; int14
      000044 82 00 00 00             45 int 0x000000 ; int15
      000048 82 00 00 00             46 int 0x000000 ; int16
      00004C 82v00u00u00             47 int _UART1_TX_IRQHandler ; int17
      000050 82v00u00u00             48 int _UART1_RX_IRQHandler ; int18
      000054 82v00u00u00             49 int _I2C_IRQHandler ; int19
      000058 82 00 00 00             50 int 0x000000 ; int20
      00005C 82 00 00 00             51 int 0x000000 ; int21
      000060 82v00u00u00             52 int _ADC1_IRQHandler ; int22
      000064 82v00u00u00             53 int _TIM4_UPD_OVF_IRQHandler ; int23
      000068 82v00u00u00             54 int _EEPROM_EEC_IRQHandler ; int24
                                     55 .area HOME
                                     56 .area GSINIT
                                     57 .area GSFINAL
                                     58 .area GSINIT
      000000                         59 __sdcc_gs_init_startup:
      000000                         60 __sdcc_init_data:
      000000 AEr00r00         [ 2]   61 ldw x, #l_DATA
      000003 27 07            [ 1]   62 jreq	00002$
      000005                         63 00001$:
      000005 72 4FuFFuFF      [ 1]   64 clr (s_DATA - 1, x)
      000009 5A               [ 2]   65 decw x
      00000A 26 F9            [ 1]   66 jrne	00001$
      00000C                         67 00002$:
      00000C AEr00r00         [ 2]   68 ldw	x, #l_INITIALIZER
      00000F 27 09            [ 1]   69 jreq	00004$
      000011                         70 00003$:
      000011 D6uFFuFF         [ 1]   71 ld	a, (s_INITIALIZER - 1, x)
      000014 D7uFFuFF         [ 1]   72 ld	(s_INITIALIZED - 1, x), a
      000017 5A               [ 2]   73 decw	x
      000018 26 F7            [ 1]   74 jrne	00003$
      00001A                         75 00004$:
                                     76 .area GSFINAL
      000000 CCr00r6C         [ 2]   77 jp	__sdcc_program_startup
                                     78 .area HOME
                                     79 .area HOME
      00006C                         80 __sdcc_program_startup:
      00006C CCr00r5B         [ 2]   81 jp	_main
                                     82 .area CODE
      000000                         83 _setup:
      000000 4B 00            [ 1]   84 push	#0x00
      000002 CDr00r00         [ 4]   85 call	_CLK_HSIPrescalerConfig
      000005 84               [ 1]   86 pop	a
      000006 4B C0            [ 1]   87 push	#0xc0
      000008 4B 10            [ 1]   88 push	#0x10
      00000A 4B 0F            [ 1]   89 push	#0x0f
      00000C 4B 50            [ 1]   90 push	#0x50
      00000E CDr00r00         [ 4]   91 call	_GPIO_Init
      000011 5B 04            [ 2]   92 addw	sp, #4
      000013 4B 40            [ 1]   93 push	#0x40
      000015 4B 20            [ 1]   94 push	#0x20
      000017 4B 05            [ 1]   95 push	#0x05
      000019 4B 50            [ 1]   96 push	#0x50
      00001B CDr00r00         [ 4]   97 call	_GPIO_Init
      00001E 5B 04            [ 2]   98 addw	sp, #4
      000020 4B 40            [ 1]   99 push	#0x40
      000022 4B 10            [ 1]  100 push	#0x10
      000024 4B 05            [ 1]  101 push	#0x05
      000026 4B 50            [ 1]  102 push	#0x50
      000028 CDr00r00         [ 4]  103 call	_GPIO_Init
      00002B 5B 04            [ 2]  104 addw	sp, #4
      00002D 4B 40            [ 1]  105 push	#0x40
      00002F 4B 08            [ 1]  106 push	#0x08
      000031 4B 0A            [ 1]  107 push	#0x0a
      000033 4B 50            [ 1]  108 push	#0x50
      000035 CDr00r00         [ 4]  109 call	_GPIO_Init
      000038 5B 04            [ 2]  110 addw	sp, #4
      00003A 4B 40            [ 1]  111 push	#0x40
      00003C 4B 08            [ 1]  112 push	#0x08
      00003E 4B 0F            [ 1]  113 push	#0x0f
      000040 4B 50            [ 1]  114 push	#0x50
      000042 CDr00r00         [ 4]  115 call	_GPIO_Init
      000045 5B 04            [ 2]  116 addw	sp, #4
      000047 4B 40            [ 1]  117 push	#0x40
      000049 4B 04            [ 1]  118 push	#0x04
      00004B 4B 0F            [ 1]  119 push	#0x0f
      00004D 4B 50            [ 1]  120 push	#0x50
      00004F CDr00r00         [ 4]  121 call	_GPIO_Init
      000052 5B 04            [ 2]  122 addw	sp, #4
      000054 CDr00r00         [ 4]  123 call	_lcd_init
      000057 CCr00r00         [ 2]  124 jp	_init_milis
      00005A                        125 00101$:
      00005A 81               [ 4]  126 ret
      00005B                        127 _main:
      00005B 52 22            [ 2]  128 sub	sp, #34
      00005D 0F 21            [ 1]  129 clr	(0x21, sp)
      00005F CDr00r00         [ 4]  130 call	_setup
      000062 4B 00            [ 1]  131 push	#0x00
      000064 4B 00            [ 1]  132 push	#0x00
      000066 CDr00r00         [ 4]  133 call	_lcd_gotoxy
      000069 85               [ 2]  134 popw	x
      00006A 4Br00            [ 1]  135 push	#<(___str_0 + 0)
      00006C 4Bs00            [ 1]  136 push	#((___str_0 + 0) >> 8)
      00006E CDr00r00         [ 4]  137 call	_lcd_puts
      000071 85               [ 2]  138 popw	x
      000072                        139 00108$:
      000072 4B 20            [ 1]  140 push	#0x20
      000074 4B 05            [ 1]  141 push	#0x05
      000076 4B 50            [ 1]  142 push	#0x50
      000078 CDr00r00         [ 4]  143 call	_GPIO_ReadInputPin
      00007B 5B 03            [ 2]  144 addw	sp, #3
      00007D 4D               [ 1]  145 tnz	a
      00007E 27 03            [ 1]  146 jreq	00132$
      000080 CCr00r8A         [ 2]  147 jp	00102$
      000083                        148 00132$:
      000083 A6 01            [ 1]  149 ld	a, #0x01
      000085 6B 22            [ 1]  150 ld	(0x22, sp), a
      000087 CCr00r8C         [ 2]  151 jp	00103$
      00008A                        152 00102$:
      00008A 0F 22            [ 1]  153 clr	(0x22, sp)
      00008C                        154 00103$:
      00008C 0D 21            [ 1]  155 tnz	(0x21, sp)
      00008E 27 03            [ 1]  156 jreq	00133$
      000090 CCr00rC2         [ 2]  157 jp	00105$
      000093                        158 00133$:
      000093 0D 22            [ 1]  159 tnz	(0x22, sp)
      000095 26 03            [ 1]  160 jrne	00134$
      000097 CCr00rC2         [ 2]  161 jp	00105$
      00009A                        162 00134$:
      00009A 4B 10            [ 1]  163 push	#0x10
      00009C 4B 0F            [ 1]  164 push	#0x0f
      00009E 4B 50            [ 1]  165 push	#0x50
      0000A0 CDr00r00         [ 4]  166 call	_GPIO_WriteReverse
      0000A3 5B 03            [ 2]  167 addw	sp, #3
      0000A5 4B 01            [ 1]  168 push	#0x01
      0000A7 4B 00            [ 1]  169 push	#0x00
      0000A9 CDr00r00         [ 4]  170 call	_lcd_gotoxy
      0000AC 85               [ 2]  171 popw	x
      0000AD 4Br0F            [ 1]  172 push	#<(___str_1 + 0)
      0000AF 4Bs00            [ 1]  173 push	#((___str_1 + 0) >> 8)
      0000B1 96               [ 1]  174 ldw	x, sp
      0000B2 1C 00 03         [ 2]  175 addw	x, #3
      0000B5 89               [ 2]  176 pushw	x
      0000B6 CDr00r00         [ 4]  177 call	_sprintf
      0000B9 5B 04            [ 2]  178 addw	sp, #4
      0000BB 96               [ 1]  179 ldw	x, sp
      0000BC 5C               [ 1]  180 incw	x
      0000BD 89               [ 2]  181 pushw	x
      0000BE CDr00r00         [ 4]  182 call	_lcd_puts
      0000C1 85               [ 2]  183 popw	x
      0000C2                        184 00105$:
      0000C2 7B 22            [ 1]  185 ld	a, (0x22, sp)
      0000C4 6B 21            [ 1]  186 ld	(0x21, sp), a
      0000C6 CCr00r72         [ 2]  187 jp	00108$
      0000C9                        188 00110$:
      0000C9 5B 22            [ 2]  189 addw	sp, #34
      0000CB 81               [ 4]  190 ret
                                    191 .area CODE
                                    192 .area CONST
                                    193 .area CONST
      000000                        194 ___str_0:
      000000 6C 69 6E 75 78 20 73   195 .ascii "linux sucks pp"
             75 63 6B 73 20 70 70
      00000E 00                     196 .db 0x00
                                    197 .area CODE
                                    198 .area CONST
      00000F                        199 ___str_1:
      00000F 73 74 6D 38 20 76 79   200 .ascii "stm8 vyber:"
             62 65 72 3A
      00001A 00                     201 .db 0x00
                                    202 .area CODE
                                    203 .area INITIALIZER
                                    204 .area CABS (ABS)
